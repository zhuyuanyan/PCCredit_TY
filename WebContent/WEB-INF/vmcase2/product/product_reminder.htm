#parse ("common/iframe_page_header.htm")
#parse ("common/macro.htm")
  <link rel="stylesheet" type="text/css" href="${uicasePath}/css/tab.css" />
<body>

	<div class="content_main">
		<div class="contentinner">
        <div class="place">
				  <div class="dvTab">
            <ul class="com-tab">
           <li class="tab">产品属性</li>
            <li class="tab">附件清单</li>
            <li class="tab">产品规则</li>
            <li class="tab activeTab"><a href="#">催收规则</a></li>
            <!-- <li class="tab">筛选规则</li> -->
         </ul>
        </div>  
			</div>
			
			<form id="id_module_form" action="${contextPath}/product/association/collection_rules_insert.json">
				<input type="hidden" id="productId" name="productId" value="${productId}">
				
				<div class="forms" id="formsId">
					<div>
                     <label for="">催收类型:</label>
					 <input id="AccountAge" type="radio" value="age" name="reminderClass" onclick="age()" checked/>账龄
                     <input id="OutOfDate" type="radio" value="date" name="reminderClass" onclick="date()"/>逾期天数

                    </div>
					<table id="age" class="table-bd" bordercolor="#CCCCCC" border="1" style="width: 100%; display:none;">
						<colgroup>
							<col width="5%" />
							<col width="10%" />
							<col width="10%" />
							<col width="10%" />
							<col width="10%" />
                            <col width="10%" />
							<col width="10%" />     
						</colgroup>
			     	<caption>催收规则</caption>

						<tr class="" id="">
							<th><label for="">期数/天数</label></th>
                            <th><label for="">逾期金额</label></th>
							<th><label for="">催收时间（<=逾期金额）</label></th>
							<th><label for="">催收方式</label></th>
							<th><label for="">催收时间（>逾期金额）</label></th>
							<th><label for="">催收方式</label></th>
						</tr>
						<tr class="accountAge" id="no1">
							
							<td><label for="">第一期</label></td>
					     	<input type="hidden" value="1" name="aging1"/>
							<td><input type="text" value="" name="money1" /></td>
							<input type="hidden" value="<=" name="operation1"/>
							<td><input type="text" value="" name="collectionTime1" /></td>
							<td><select id="collectionWay" name="collectionWay1">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation11"/>
							<td><input type="text" value="" name="collectionTime11"/> </td>
                            <td><select id="collectionWay" name="collectionWay11">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="accountAge" id="no2">
							<td><label for="">第二期</label></td>
						    <input type="hidden" value="2" name="aging2"/>
						    <input type="hidden" value="<=" name="operation2"/>
							<td><input type="text" value="" name="money2" /></td>
							<td><input type="text" value="" name="collectionTime2" /></td>
							<td><select id="collectionWay" name="collectionWay2">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<td><input type="text" value="" name="collectionTime22"/> </td>
							<input type="hidden" value=">" name="operation22"/>
                            <td><select id="collectionWay" name="collectionWay22">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="accountAge" id="no3">
							<td><label for="">第三期</label></td>
							<input type="hidden" value="3" name="aging3"/>
							<input type="hidden" value="<=" name="operation3"/>
							<td><input type="text" value="" name="money3" /></td>
							<td><input type="text" value="" name="collectionTime3" /></td>
							<td><select id="collectionWay" name="collectionWay3">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation33"/>
							<td><input type="text" value="" name="collectionTime33"/> </td>
                            <td><select id="collectionWay" name="collectionWay33">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="accountAge" id="no4">
							<td><label for="">第四期</label></td>
							<input type="hidden" value="4" name="aging4"/>
							<input type="hidden" value="<=" name="operation4"/>
							<td><input type="text" value="" name="money4" /></td>
							<td><input type="text" value="" name="collectionTime4" /></td>
							<td><select id="collectionWay" name="collectionWay4">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<td><input type="text" value="" name="collectionTime44"/> </td>
							<input type="hidden" value=">" name="operation44"/>
                            <td><select id="collectionWay" name="collectionWay44">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="accountAge" id="no5">
							<td><label for="">第五期</label></td>
							<input type="hidden" value="5" name="aging5"/>
							<input type="hidden" value="<=" name="operation5"/>
							<td><input type="text" value="" name="money5" /></td>
							<td><input type="text" value="" name="collectionTime5" /></td>
							<td><select id="collectionWay" name="collectionWay5">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<td><input type="text" value="" name="collectionTime55"/> </td>
							<input type="hidden" value=">" name="operation55"/>
                            <td><select id="collectionWay" name="collectionWay55">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="accountAge" id="no6">
							<td><label for="">第六期</label></td>
							<input type="hidden" value="6" name="aging6"/>
							<input type="hidden" value="<=" name="operation6"/>
							<td><input type="text" value="" name="money6" /></td>
							<td><input type="text" value="" name="collectionTime6" /></td>
							<td><select id="collectionWay" name="collectionWay6">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<td><input type="text" value="" name="collectionTime66"/> </td>
							<input type="hidden" value=">" name="operation66"/>
                            <td><select id="collectionWay" name="collectionWay66">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr><tr class="accountAge" id="no7">
							<td><label for="">第七期</label></td>
							<input type="hidden" value="7" name="aging7"/>
							<input type="hidden" value="<=" name="operation7"/>
							<td><input type="text" value="" name="money7" /></td>
							<td><input type="text" value="" name="collectionTime7" /></td>
							<td><select id="collectionWay" name="collectionWay7">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<td><input type="text" value="" name="collectionTime77"/> </td>
							<input type="hidden" value=">" name="operation77"/>
                            <td><select id="collectionWay" name="collectionWay77">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr><tr class="accountAge" id="no8">
							<td><label for="">第八期</label></td>
							<input type="hidden" value="8" name="aging8"/>
							<input type="hidden" value="<=" name="operation8"/>
							<td><input type="text" value="" name="money8" /></td>
							<td><input type="text" value="" name="collectionTime8" /></td>
							<td><select id="collectionWay" name="collectionWay8">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<td><input type="text" value="" name="collectionTime88"/> </td>
							<input type="hidden" value=">" name="operation88"/>
                            <td><select id="collectionWay" name="collectionWay88">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr><tr class="accountAge" id="no9">
							<td><label for="">第九期</label></td>
							<input type="hidden" value="9" name="aging9"/>
							<input type="hidden" value="<=" name="operation9"/>
							<td><input type="text" value="" name="money9" /></td>
							<td><input type="text" value="" name="collectionTime9" /></td>
							<td><select id="collectionWay" name="collectionWay9">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<td><input type="text" value="" name="collectionTime99"/> </td>
							<input type="hidden" value=">" name="operation99"/>
                            <td><select id="collectionWay" name="collectionWay99">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="accountAge" id="no10">
							<td><label for="">第十~十二期</label></td>
							<input type="hidden" value="10" name="aging10"/>
							<input type="hidden" value="<=" name="operation10"/>
							<td><input type="text" value="" name="money10" /></td>
							<td><input type="text" value="" name="collectionTime10" /></td>
							<td><select id="collectionWay" name="collectionWay10">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<td><input type="text" value="" name="collectionTime110"/> </td>
							<input type="hidden" value=">" name="operation110"/>
                            <td><select id="collectionWay" name="collectionWay110">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="accountAge" id="no11">
							<td><label for="">第十二期以上</label></td>
							<input type="hidden" value="13" name="aging13"/>
							<input type="hidden" value="<=" name="operation13"/>
							<td><input type="text" value="" name="money13" /></td>
							<td><input type="text" value="" name="collectionTime13" /></td>
							<td><select id="collectionWay" name="collectionWay13">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<td><input type="text" value="" name="collectionTime113"/> </td>
							<input type="hidden" value=">" name="operation113"/>
                            <td><select id="collectionWay" name="collectionWay113">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
             
                    </table>
					
                    <table id="date" class="table-bd" bordercolor="#CCCCCC" border="1" style="width: 100%;display:none;">
						<colgroup>
							<col width="5%" />
							<col width="10%" />
							<col width="10%" />
							<col width="10%" />
							<col width="10%" />
                            <col width="10%" />
							<col width="10%" />     
						</colgroup>
			     	<caption>催收规则</caption>

						<tr class="" id="">
							<th><label for="">期数/天数</label></th>
                            <th><label for="">逾期金额</label></th>
							<th><label for="">催收时间（<=逾期金额）</label></th>
							<th><label for="">催收方式</label></th>
							<th><label for="">催收时间（>逾期金额）</label></th>
							<th><label for="">催收方式</label></th>
						</tr>
                    	
                        <tr class="outofDate" id="day1">
							<td><label for="">1~30天</label></td>
							<input type="hidden" value="1" name="overdueDayStart1"/>
							<input type="hidden" value="30" name="overdueDayEnd1"/>
							<td><input type="text" value="" name="money1111"  /></td>
							<input type="hidden" value="<=" name="operation1111"/>
							<td><input type="text" value="" name="collectionTime1111" /></td>
							<td><select id="collectionWay" name="collectionWay1111">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation11111"/>
							<td><input type="text" value="" name="collectionTime11111"  /> </td>
                            <td><select id="collectionWay" name="collectionWay11111">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="outofDate" id="day2">
							<td><label for="">31~60天</label></td>
							<input type="hidden" value="31" name="overdueDayStart2"/>
							<input type="hidden" value="60" name="overdueDayEnd2"/>
							<td><input type="text" value="" name="money1112"  /></td>
							<input type="hidden" value="<=" name="operation1112"/>
							<td><input type="text" value="" name="collectionTime1112" /></td>
							<td><select id="collectionWay" name="collectionWay1112">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation11112"/>
							<td><input type="text" value="" name="collectionTime11112"  /> </td>
                            <td><select id="collectionWay" name="collectionWay11112">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="outofDate" id="day3">
							<td><label for="">61~90天</label></td>
							<input type="hidden" value="61" name="overdueDayStart3"/>
							<input type="hidden" value="90" name="overdueDayEnd3"/>
							<td><input type="text" value="" name="money1113"  /></td>
							<input type="hidden" value="<=" name="operation1113"/>
							<td><input type="text" value="" name="collectionTime1113" /></td>
							<td><select id="collectionWay" name="collectionWay1113">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation11113"/>
							<td><input type="text" value="" name="collectionTime11113"  /> </td>
                            <td><select id="collectionWay" name="collectionWay11113">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="outofDate" id="day4">
							<td><label for="">91~120天</label></td>
							<input type="hidden" value="91" name="overdueDayStart4"/>
							<input type="hidden" value="120" name="overdueDayEnd4"/>
							<td><input type="text" value="" name="money1114"  /></td>
							<input type="hidden" value="<=" name="operation1114"/>
							<td><input type="text" value="" name="collectionTime1114" /></td>
							<td><select id="collectionWay" name="collectionWay1114">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation11114"/>
							<td><input type="text" value="" name="collectionTime11114"  /> </td>
                            <td><select id="collectionWay" name="collectionWay11114">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="outofDate" id="day5">
							<td><label for="">121~150天</label></td>
							<input type="hidden" value="121" name="overdueDayStart5"/>
							<input type="hidden" value="150" name="overdueDayEnd5"/>
							<td><input type="text" value="" name="money1115"  /></td>
							<input type="hidden" value="<=" name="operation1115"/>
							<td><input type="text" value="" name="collectionTime1115" /></td>
							<td><select id="collectionWay" name="collectionWay1115">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation11115"/>
							<td><input type="text" value="" name="collectionTime11115"  /> </td>
                            <td><select id="collectionWay" name="collectionWay11115">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="outofDate" id="day6">
							<td><label for="">151~180天</label></td>
							<input type="hidden" value="151" name="overdueDayStart6"/>
							<input type="hidden" value="180" name="overdueDayEnd6"/>
							<td><input type="text" value="" name="money1116"  /></td>
							<input type="hidden" value="<=" name="operation1116"/>
							<td><input type="text" value="" name="collectionTime1116" /></td>
							<td><select id="collectionWay" name="collectionWay1116">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation11116"/>
							<td><input type="text" value="" name="collectionTime11116"  /> </td>
                            <td><select id="collectionWay" name="collectionWay11116">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr><tr class="outofDate" id="day7">
							<td><label for="">181~210天</label></td>
						<input type="hidden" value="181" name="overdueDayStart7"/>
							<input type="hidden" value="210" name="overdueDayEnd7"/>
							<td><input type="text" value="" name="money1117"  /></td>
							<input type="hidden" value="<=" name="operation1117"/>
							<td><input type="text" value="" name="collectionTime1117" /></td>
							<td><select id="collectionWay" name="collectionWay1117">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation11117"/>
							<td><input type="text" value="" name="collectionTime11117"  /> </td>
                            <td><select id="collectionWay" name="collectionWay11117">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr><tr class="outofDate" id="day8">
							<td><label for="">211~240天</label></td>
							<input type="hidden" value="211" name="overdueDayStart8"/>
							<input type="hidden" value="240" name="overdueDayEnd8"/>
							<td><input type="text" value="" name="money1118"  /></td>
							<input type="hidden" value="<=" name="operation1118"/>
							<td><input type="text" value="" name="collectionTime1118" /></td>
							<td><select id="collectionWay" name="collectionWay1118">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation11118"/>
							<td><input type="text" value="" name="collectionTime11118"  /> </td>
                            <td><select id="collectionWay" name="collectionWay11118">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr><tr class="outofDate" id="day9">
							<td><label for="">241~270天</label></td>
							<input type="hidden" value="241" name="overdueDayStart9"/>
							<input type="hidden" value="270" name="overdueDayEnd9"/>
							<td><input type="text" value="" name="money1119"  /></td>
							<input type="hidden" value="<=" name="operation1119"/>
							<td><input type="text" value="" name="collectionTime1119" /></td>
							<td><select id="collectionWay" name="collectionWay1119">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation11119"/>
							<td><input type="text" value="" name="collectionTime11119"  /> </td>
                            <td><select id="collectionWay" name="collectionWay11119">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="outofDate" id="day10">
							<td><label for="">271~360天</label></td>
							<input type="hidden" value="271" name="overdueDayStart10"/>
							<input type="hidden" value="360" name="overdueDayEnd10"/>
							<td><input type="text" value="" name="money11110"  /></td>
							<input type="hidden" value="<=" name="operation11110"/>
							<td><input type="text" value="" name="collectionTime11110" /></td>
							<td><select id="collectionWay" name="collectionWay11110">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation111110"/>
							<td><input type="text" value="" name="collectionTime111110"  /> </td>
                            <td><select id="collectionWay" name="collectionWay111110">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                        <tr class="outofDate" id="day11">
							<td><label for="">大于360天</label></td>
							<input type="hidden" value="360" name="overdueDayStart14"/>
							<input type="hidden" value="" name="overdueDayEnd14"/>
							<td><input type="text" value="" name="money111114"/></td>
							<input type="hidden" value="<=" name="operation111114"/>
							<td><input type="text" value="" name="collectionTime111114" /></td>
							<td><select id="collectionWay" name="collectionWay111114">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
							<input type="hidden" value=">" name="operation1111114"/>
							<td><input type="text" value="" name="collectionTime1111114"  /> </td>
                            <td><select id="collectionWay" name="collectionWay1111114">#customerInfo($request.getAttribute("collectionMethodList"),'')</select></td>
						</tr>
                    </table>
				</div>
			</form>

			<div class="submit">
				<input id="id_save_button" type="button" value="下一步" class="current" />
                <input type="button" onclick="javascript:history.go(-1);" value="取消" />
			</div>
		</div>
	</div>
    <script>
    function age(){
		document.getElementById("age").style.display="block";
		document.getElementById("date").style.display="none";
		}
		
	function date(){
		document.getElementById("age").style.display="none";
		document.getElementById("date").style.display="block";
		}
    </script>
	
	<script type="text/javascript">
	var layout=new FormsLayout("formsId");			
	window.top.currentWindow.setLayout(layout);
	#set ($formName = "'#id_module_form'")
	#validator($formName)
	$(document).ready(function() {	
		document.getElementById("age").style.display="block";
		 $("#id_save_button").click(function() {
	    if ($($formName).valid()) {
	         var accessorieIds = "";
	     	 $("input[name='accessorieId']:checkbox").each(function(){
	     		 if ($(this).attr("checked")){
	     			accessorieIds+=$(this).val()+","; 
	     		}
	     	  }
	         );
	     	 
	     	 $("#accessorieIds").val(accessorieIds);
	     	 var formjson = $($formName).serialize();
	        /*   $.get($($formName).attr("action"), formjson, function(data, textStatus, jqXhr) {
	            if (data.success) {
	                window.location.href="${contextPath}/product/productinformation/browse.page";
	            }
	          }); */
	          
	     	$.ajax({
				url : $($formName).attr("action"),
				type : "get",
				data : formjson,
				success : function(data) {
					if (data.success) {
						window.location.href="${contextPath}/product/productinformation/browse.page";
						topWin.Dialog.message("保存成功！");
					}
					else{
						topWin.Dialog.message(data.message);
				    }
				}
			});
	        }
		  });
	});
	
	
	</script>

</body>
</html>